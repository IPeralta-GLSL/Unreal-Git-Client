import json
from pathlib import Path

class TranslationManager:
    def __init__(self):
        self.current_language = 'es'
        self.translations = {
            'es': {
                'app_name': 'Cliente Git',
                'ready': 'Listo',
                'home': 'Inicio',
                'repository': 'Repositorio',
                
                'file': 'Archivo',
                'edit': 'Editar',
                'view': 'Ver',
                'help': 'Ayuda',
                
                'open_repository': 'Abrir Repositorio',
                'clone_repository': 'Clonar Repositorio',
                'settings': 'Ajustes',
                'exit': 'Salir',
                'close': 'Cerrar',
                
                'new_tab': 'Nueva pestaña',
                'close_tab': 'Cerrar pestaña',
                
                'changes': 'CAMBIOS',
                'changes_desc': 'Archivos modificados en el área de trabajo',
                'staged': 'PREPARADOS',
                'staged_desc': 'Archivos listos para commit',
                'branches': 'RAMAS',
                'branches_desc': 'Gestión de ramas del repositorio',
                'history': 'HISTORIAL',
                'history_desc': 'Gráfico de commits del repositorio',
                
                'commit_message': 'Mensaje del commit',
                'commit_message_placeholder': 'Escribe un mensaje descriptivo del commit...',
                'commit': 'Commit',
                'stage_all': 'Preparar Todo',
                'unstage_all': 'Quitar Todo',
                'discard_changes': 'Descartar Cambios',
                
                'current_branch': 'Rama actual',
                'new_branch': 'Nueva Rama',
                'merge_branch': 'Fusionar Rama',
                'delete_branch': 'Eliminar Rama',
                'checkout_branch': 'Cambiar a Rama',
                
                'pull': 'Pull',
                'push': 'Push',
                'fetch': 'Fetch',
                
                'stage': 'Preparar',
                'unstage': 'Quitar',
                'discard': 'Descartar',
                
                'modified': 'Modificado',
                'added': 'Agregado',
                'deleted': 'Eliminado',
                'renamed': 'Renombrado',
                'untracked': 'Sin seguimiento',
                
                'author': 'Autor',
                'date': 'Fecha',
                'hash': 'Hash',
                'message': 'Mensaje',
                
                'select_repository': 'Seleccionar Repositorio Git',
                'not_git_repository': 'No es un repositorio Git',
                'not_git_repository_msg': 'La carpeta seleccionada no contiene un repositorio Git.',
                'repository_loaded': 'Repositorio cargado',
                
                'github_accounts': 'Administrar Cuentas de GitHub',
                'gitlab_accounts': 'Administrar Cuentas de GitLab',
                'add_edit_account': 'Agregar/Editar Cuenta',
                'saved_accounts': 'Cuentas Guardadas',
                
                'username': 'Usuario',
                'email': 'Email',
                'token': 'Token',
                'server': 'Servidor',
                'show': 'Mostrar',
                'hide': 'Ocultar',
                
                'add_account': 'Agregar Cuenta',
                'update_account': 'Actualizar Cuenta',
                'delete_account': 'Eliminar Cuenta',
                'clear_fields': 'Limpiar Campos',
                
                'required_fields': 'Campos requeridos',
                'username_token_required': 'Usuario y Token son obligatorios',
                'username_token_server_required': 'Usuario, Token y Servidor son obligatorios',
                'username_required': 'Usuario es obligatorio',
                'username_server_required': 'Usuario y Servidor son obligatorios',
                
                'account_not_found': 'Cuenta no encontrada',
                'account_not_found_msg': 'No existe una cuenta con el usuario',
                
                'success': 'Éxito',
                'github_account_added': 'Cuenta de GitHub agregada correctamente',
                'gitlab_account_added': 'Cuenta de GitLab agregada correctamente',
                'github_account_updated': 'Cuenta de GitHub actualizada correctamente',
                'gitlab_account_updated': 'Cuenta de GitLab actualizada correctamente',
                
                'confirm_delete': 'Confirmar eliminación',
                'confirm_delete_account': '¿Estás seguro de eliminar la cuenta',
                'no_selection': 'Sin selección',
                'select_account_to_delete': 'Selecciona una cuenta para eliminar',
                'account_deleted': 'Cuenta eliminada correctamente',
                
                'welcome': 'Bienvenido a Git Client',
                'welcome_desc': 'Comienza abriendo un repositorio existente o clonando uno nuevo',
                'recent_repositories': 'Repositorios Recientes',
                'no_recent_repos': 'No hay repositorios recientes',
                'quick_actions': 'Acciones Rápidas',
                
                'git_client': 'Git Client',
                'open_repository_btn': 'Abrir Repositorio',
                'open_repository_desc': 'Abre un repositorio Git existente',
                'clone_repository_btn': 'Clonar Repositorio',
                'clone_repository_desc': 'Descarga un repositorio remoto',
                'quick_tips': 'Consejos Rápidos',
                'tip_new_tab': 'Ctrl+T para nueva pestaña, Ctrl+W para cerrar',
                'tip_git_lfs': 'Git LFS es esencial para proyectos de Unreal Engine',
                'tip_commit_messages': 'Escribe mensajes de commit descriptivos y claros',
                'tip_pull_before_push': 'Usa Pull antes de Push para evitar conflictos',
                'tip_create_branches': 'Crea ramas para nuevas características',
                'shortcuts_text': 'Atajos: Ctrl+T nueva pestaña • Ctrl+W cerrar • Ctrl+Tab cambiar',
                'version_text': 'v1.0.0',
                
                'current_branch_label': 'RAMA ACTUAL (clic para cambiar)',
                'folder_button': 'Carpeta',
                'folder_tooltip': 'Abrir carpeta del proyecto',
                'terminal_button': 'Terminal',
                'terminal_tooltip': 'Abrir terminal en la carpeta del proyecto',
                'unreal_button': 'Unreal',
                'unreal_tooltip': 'Abrir proyecto con Unreal Engine',
                'pull_tooltip': 'Descargar cambios del servidor',
                'push_tooltip': 'Subir tus cambios al servidor',
                'fetch_tooltip': 'Actualizar información sin descargar',
                'refresh_tooltip': 'Actualizar estado del repositorio',
                
                'changes_title': 'CAMBIOS',
                'changes_subtitle': 'Archivos modificados en tu repositorio',
                'staged_title': 'PREPARADOS',
                'commit_title': 'COMMIT',
                'commit_subtitle': 'Guardar cambios con un mensaje descriptivo',
                'lfs_title': 'GIT LFS',
                'lfs_subtitle': 'Manejo de archivos grandes de Unreal Engine',
                'history_title': 'HISTORIAL',
                'history_subtitle': 'Gráfico de commits del repositorio',
                'info_title': 'INFORMACIÓN',
                'info_subtitle': 'Detalles del repositorio actual',
                'diff_title': 'DIFERENCIAS',
                'diff_subtitle': 'Cambios en el archivo seleccionado',
                
                'add_all': 'Agregar Todo',
                'add_all_tooltip': 'Agregar todos los cambios',
                'add': 'Agregar',
                'add_tooltip': 'Agregar archivo seleccionado',
                'remove': 'Quitar',
                'remove_tooltip': 'Quitar archivo del staging',
                'add_to_gitignore': 'Agregar a .gitignore',
                'add_to_lfs': 'Agregar a LFS',
                'discard_changes_context': 'Descartar Cambios',
                'stage_file_context': 'Preparar (Stage)',
                'unstage_file_context': 'Quitar (Unstage)',
                'select_all': 'Seleccionar Todo',
                'deselect_all': 'Deseleccionar Todo',
                'success_gitignore_added': 'Archivo {file} agregado a .gitignore',
                'success_lfs_added': 'Archivo {file} agregado a LFS',
                'confirm_discard': 'Confirmar descarte',
                'confirm_discard_text': '¿Estás seguro de descartar los cambios en {file}?\nEsta acción no se puede deshacer.',
                'success_discard': 'Cambios descartados en {file}',
                
                'commit_placeholder': 'Describe tus cambios...',
                'commit_and_save': 'Hacer Commit y Guardar',
                'commit_and_save_tooltip': 'Guardar todos los cambios preparados con este mensaje',
                
                'lfs_status': 'Estado: No inicializado',
                'lfs_installed': 'Estado: LFS instalado',
                'lfs_not_installed': 'Estado: LFS no instalado',
                'install': 'Instalar',
                'install_tooltip': 'Instalar Git LFS en este repositorio',
                'config_lfs': 'Config LFS',
                'config_lfs_tooltip': 'Configurar LFS para archivos grandes',
                'config_unreal': 'Config Unreal',
                'config_unreal_tooltip': 'Configurar LFS para archivos de Unreal Engine',
                'download_lfs_files': 'Descargar Archivos LFS',
                'download_lfs_files_tooltip': 'Descargar archivos grandes rastreados por LFS',
                'lfs_locks': 'Bloqueos',
                'lfs_prune': 'Limpiar LFS',
                'lfs_tracking_patterns': 'Rastreando {count} patrones',
                'lfs_no_files_tracked': 'Sin archivos rastreados',
                'lfs_prune_success': 'Limpieza de LFS completada correctamente.',
                'lfs_prune_error': 'Error en limpieza LFS: {message}',
                'lfs_locks_title': 'Bloqueos Git LFS',
                'lfs_lock_path': 'Ruta',
                'lfs_lock_owner': 'Propietario',
                'lfs_lock_id': 'ID',
                'lfs_lock_date': 'Bloqueado el',
                'lfs_unlock_selected': 'Desbloquear Seleccionados',
                'lfs_tracking': 'Rastreo LFS',
                'lfs_tracking_title': 'Configuración de Rastreo LFS',
                'lfs_tracking_info': 'Agrega patrones de archivos para ser manejados por Git LFS (ej: *.psd, *.uasset)',
                'add_plugin_defaults': 'Agregar Defaults Plugins',
                'add_unreal_defaults': 'Agregar Defaults Unreal',
                'success_unreal_defaults': 'Patrones de Unreal Engine agregados correctamente',
                'lfs_size': 'Tamaño en disco (LFS)',
                
                'no_repo_loaded': 'No hay repositorio cargado',
                'no_changes': 'No hay cambios - Todo está actualizado',
                'select_file_diff': 'Selecciona un archivo para ver sus cambios...',
                
                'unreal_project': 'Proyecto Unreal',
                'project_type': 'Tipo',
                'unreal_engine_project': 'Proyecto Unreal Engine',
                'path': 'Ruta',
                'current_branch_info': 'Rama actual',
                'remote': 'Remoto',
                'last_commit': 'Último commit',
                
                'success_all_files_added': 'Todos los archivos han sido agregados',
                'error_commit_message': 'Debes escribir un mensaje para el commit',
                'success_commit': 'Commit realizado correctamente',
                'success_pull': 'Pull completado',
                'success_push': 'Push completado',
                'success_fetch': 'Fetch completado',
                'success_lfs_installed': 'Git LFS instalado correctamente',
                'success_lfs_pull': 'LFS Pull completado',
                'success_clone': 'Repositorio clonado en',
                'error_clone': 'Error al clonar',
                
                'cloning_repository': 'Clonando repositorio...',
                'cloning': 'Clonando',
                
                'change_branch_menu': 'Cambiar Rama',
                'remote_branches': 'Ramas Remotas',
                'new_branch_menu': 'Nueva Rama...',
                'manage_branches': 'Administrar Ramas...',
                
                'change_branch_dialog': 'Cambiar Rama',
                'change_branch_question': '¿Cambiar a la rama \'{branch}\'?',
                'error_change_branch': 'No se pudo cambiar de rama',
                
                'new_branch_dialog': 'Nueva Rama',
                'new_branch_name': 'Nombre de la nueva rama:',
                'branch_created': 'Rama Creada',
                'branch_created_question': 'Rama \'{branch}\' creada correctamente.\n\n¿Cambiar a esta rama ahora?',
                'error_create_branch': 'No se pudo crear la rama',
                
                'create_branch_from_commit': 'Crear Rama',
                'create_branch_from_commit_text': 'Nombre de la nueva rama desde commit {hash}:',
                'branch_created_from_commit': 'Rama \'{branch}\' creada desde el commit {hash}',
                
                'confirm_reset': 'Confirmar Reset',
                'reset_soft': 'Soft (mantener cambios)',
                'reset_mixed': 'Mixed (descartar staging)',
                'reset_hard': 'Hard (descartar todo)',
                'reset_warning': '\n\n⚠ ADVERTENCIA: Perderás todos los cambios no guardados!',
                'reset_question': '¿Hacer reset {mode} al commit {hash}?{warning}',
                'success_reset': 'Reset {mode} completado',
                'error_reset': 'Error en reset',
                
                'confirm_checkout': 'Confirmar Checkout',
                'checkout_question': '¿Ver el commit {hash}?\n\nEstarás en modo \'detached HEAD\'.\nPara guardar cambios, crea una nueva rama.',
                'checkout_success': 'Ahora estás viendo el commit {hash}\n\nUsa el menú de ramas para volver a una rama normal.',
                
                'hash_copied': 'Hash copiado: {hash}',
                
                'plugin_disabled': 'Plugin desactivado',
                'unreal_plugin_disabled': 'El plugin de Unreal Engine está desactivado.\n\nActívalo desde Ajustes > Plugins para usar esta función.',
                'not_unreal_project': 'No es un proyecto de Unreal',
                'not_unreal_project_text': 'Este repositorio no parece ser un proyecto de Unreal Engine.',
                
                'optional': 'opcional',
                'no_email': 'Sin email',
                'no_message': 'Sin mensaje',
                'unknown': 'Desconocido',
                
                'general': 'General',
                'general_config': 'Configuración General',
                'general_settings': 'Configuración General',
                'language': 'Idioma',
                'language_settings': 'Idioma / Language',
                'language_change_note': 'El cambio de idioma se aplicará en el siguiente inicio de la aplicación.',
                'language_changed_restart': 'Idioma cambiado. Reinicia la aplicación para ver los cambios.',
                'configuration': 'Configuración',
                'configuration_accounts': 'Configuración y cuentas',
                
                'clone': 'Clonar',
                'clone_repository': 'Clonar Repositorio',
                'clone_git_repository': 'Clonar Repositorio Git',
                'clone_description': 'Descarga una copia de un repositorio remoto a tu computadora',
                'repository_url': 'URL del Repositorio',
                'destination_folder': 'Carpeta de Destino',
                'browse': 'Explorar',
                'cancel': 'Cancelar',
                'clone_helper': 'El repositorio se clonará en una nueva carpeta dentro de la ubicación seleccionada',
                'select_folder': 'Seleccionar Carpeta',
                
                'accounts': 'Cuentas',
                'plugins': 'Plugins',
                'appearance': 'Apariencia',
                'my_accounts': 'Mis Cuentas',
                'git_local': 'Git Local',
                'connected_accounts': 'Tus cuentas conectadas:',
                'refresh': 'Actualizar',
                'remove': 'Eliminar',
                'delete': 'Eliminar',
                
                'login_with_github': 'Login con GitHub',
                'login_with_gitlab': 'Login con GitLab',
                'alternative_methods': 'Métodos alternativos:',
                'add_token_manually': 'Agregar un Personal Access Token manualmente:',
                'add_token': 'Agregar Token',
                'gitlab_url': 'URL de GitLab:',
                'application_id': 'Application ID:',
                'application_secret': 'Application Secret:',
                'connect_gitlab': 'Conectar con GitLab',
                'add_pat_manually': 'O agrega manualmente un Personal Access Token:',
                
                'git_global_config': 'Configura tu identidad global de Git:',
                'name': 'Nombre',
                'email': 'Email',
                'full_name_placeholder': 'Tu nombre completo',
                'email_placeholder': 'tu@email.com',
                'save_global_config': 'Guardar Configuración Global',
                
                'starting_auth': 'Iniciando autenticación...',
                'auth_error_connection': 'Error al iniciar la autenticación. Verifica tu conexión a internet.',
                'auth_timeout': 'Tiempo de espera agotado. Intenta nuevamente.',
                'error_user_info': 'Error al obtener información del usuario.',
                'auth_error': 'Error en la autenticación. Intenta nuevamente.',
                'starting_gitlab_auth': 'Iniciando autenticación con GitLab...',
                
                'installed_plugins': 'Plugins instalados:',
                'enable': 'Activar',
                'disable': 'Desactivar',
                
                'appearance_customization': 'Personalización de Apariencia',
                'select_theme': 'Selecciona el tema que prefieras para la interfaz:',
                'selected': 'Seleccionado',
                'select': 'Seleccionar',
                'theme_changes_instant': 'Los cambios de tema se aplican inmediatamente sin necesidad de reiniciar',
                
                'enter_gitlab_app_id': 'Ingresa tu GitLab Application ID',
                'enter_gitlab_app_secret': 'Ingresa tu GitLab Application Secret',
                
                'error': 'Error',
                'timeout': 'Timeout',
                'enter_client_id_secret': 'Por favor ingresa el Client ID y Client Secret',
                'enter_app_id_secret': 'Ingresa Application ID y Secret',
                'oauth_server_error': 'No se pudo iniciar servidor OAuth',
                'timeout_expired': 'Tiempo de espera agotado',
                'error_get_user_info': 'No se pudo obtener información del usuario',
                'no_access_token': 'No se recibió token de acceso',
                'error_exchange_code': 'Error al intercambiar código',
                'oauth_error': 'Error en OAuth',
                'enter_valid_token': 'Ingresa un token válido',
                'invalid_token': 'Token inválido o sin permisos',
                'error_verify_token': 'Error al verificar token',
                'enter_name_email': 'Ingresa nombre y email',
                'error_save_config': 'Error al guardar configuración',
                'app_minimized_to_tray': 'La aplicación se ha minimizado a la bandeja del sistema. Doble clic para restaurar.',
                'quit': 'Salir',
            },
            'en': {
                'app_name': 'Git Client',
                'ready': 'Ready',
                'home': 'Home',
                'repository': 'Repository',
                
                'file': 'File',
                'edit': 'Edit',
                'view': 'View',
                'help': 'Help',
                
                'open_repository': 'Open Repository',
                'clone_repository': 'Clone Repository',
                'settings': 'Settings',
                'exit': 'Exit',
                'close': 'Close',
                
                'new_tab': 'New tab',
                'close_tab': 'Close tab',
                
                'changes': 'CHANGES',
                'changes_desc': 'Modified files in the working directory',
                'staged': 'STAGED',
                'staged_desc': 'Files ready to commit',
                'branches': 'BRANCHES',
                'branches_desc': 'Repository branch management',
                'history': 'HISTORY',
                'history_desc': 'Repository commit graph',
                
                'commit_message': 'Commit message',
                'commit_message_placeholder': 'Write a descriptive commit message...',
                'commit': 'Commit',
                'stage_all': 'Stage All',
                'unstage_all': 'Unstage All',
                'discard_changes': 'Discard Changes',
                
                'current_branch': 'Current branch',
                'new_branch': 'New Branch',
                'merge_branch': 'Merge Branch',
                'delete_branch': 'Delete Branch',
                'checkout_branch': 'Checkout Branch',
                
                'pull': 'Pull',
                'push': 'Push',
                'fetch': 'Fetch',
                
                'stage': 'Stage',
                'unstage': 'Unstage',
                'discard': 'Discard',
                
                'modified': 'Modified',
                'added': 'Added',
                'deleted': 'Deleted',
                'renamed': 'Renamed',
                'untracked': 'Untracked',
                
                'author': 'Author',
                'date': 'Date',
                'hash': 'Hash',
                'message': 'Message',
                
                'select_repository': 'Select Git Repository',
                'not_git_repository': 'Not a Git repository',
                'not_git_repository_msg': 'The selected folder does not contain a Git repository.',
                'repository_loaded': 'Repository loaded',
                
                'github_accounts': 'Manage GitHub Accounts',
                'gitlab_accounts': 'Manage GitLab Accounts',
                'add_edit_account': 'Add/Edit Account',
                'saved_accounts': 'Saved Accounts',
                
                'username': 'Username',
                'email': 'Email',
                'token': 'Token',
                'server': 'Server',
                'show': 'Show',
                'hide': 'Hide',
                
                'add_account': 'Add Account',
                'update_account': 'Update Account',
                'delete_account': 'Delete Account',
                'clear_fields': 'Clear Fields',
                
                'required_fields': 'Required fields',
                'username_token_required': 'Username and Token are required',
                'username_token_server_required': 'Username, Token and Server are required',
                'username_required': 'Username is required',
                'username_server_required': 'Username and Server are required',
                
                'account_not_found': 'Account not found',
                'account_not_found_msg': 'There is no account with username',
                
                'success': 'Success',
                'github_account_added': 'GitHub account added successfully',
                'gitlab_account_added': 'GitLab account added successfully',
                'github_account_updated': 'GitHub account updated successfully',
                'gitlab_account_updated': 'GitLab account updated successfully',
                
                'confirm_delete': 'Confirm deletion',
                'confirm_delete_account': 'Are you sure you want to delete the account',
                'no_selection': 'No selection',
                'select_account_to_delete': 'Select an account to delete',
                'account_deleted': 'Account deleted successfully',
                
                'welcome': 'Welcome to Git Client',
                'welcome_desc': 'Start by opening an existing repository or cloning a new one',
                'recent_repositories': 'Recent Repositories',
                'no_recent_repos': 'No recent repositories',
                'quick_actions': 'Quick Actions',
                
                'git_client': 'Git Client',
                'open_repository_btn': 'Open Repository',
                'open_repository_desc': 'Open an existing Git repository',
                'clone_repository_btn': 'Clone Repository',
                'clone_repository_desc': 'Download a remote repository',
                'quick_tips': 'Quick Tips',
                'tip_new_tab': 'Ctrl+T for new tab, Ctrl+W to close',
                'tip_git_lfs': 'Git LFS is essential for Unreal Engine projects',
                'tip_commit_messages': 'Write descriptive and clear commit messages',
                'tip_pull_before_push': 'Use Pull before Push to avoid conflicts',
                'tip_create_branches': 'Create branches for new features',
                'shortcuts_text': 'Shortcuts: Ctrl+T new tab • Ctrl+W close • Ctrl+Tab switch',
                'version_text': 'v1.0.0',
                
                'current_branch_label': 'CURRENT BRANCH (click to change)',
                'folder_button': 'Folder',
                'folder_tooltip': 'Open project folder',
                'terminal_button': 'Terminal',
                'terminal_tooltip': 'Open terminal in project folder',
                'unreal_button': 'Unreal',
                'unreal_tooltip': 'Open project with Unreal Engine',
                'pull_tooltip': 'Download changes from server',
                'push_tooltip': 'Upload your changes to server',
                'fetch_tooltip': 'Update information without downloading',
                'refresh_tooltip': 'Refresh repository status',
                
                'changes_title': 'CHANGES',
                'changes_subtitle': 'Modified files in your repository',
                'staged_title': 'STAGED',
                'commit_title': 'COMMIT',
                'commit_subtitle': 'Save changes with a descriptive message',
                'lfs_title': 'GIT LFS',
                'lfs_subtitle': 'Large file handling for Unreal Engine',
                'history_title': 'HISTORY',
                'history_subtitle': 'Repository commit graph',
                'info_title': 'INFORMATION',
                'info_subtitle': 'Current repository details',
                'diff_title': 'DIFFERENCES',
                'diff_subtitle': 'Changes in selected file',
                
                'add_all': 'Add All',
                'add_all_tooltip': 'Add all changes',
                'add': 'Add',
                'add_tooltip': 'Add selected file',
                'remove': 'Remove',
                'remove_tooltip': 'Remove file from staging',
                'add_to_gitignore': 'Add to .gitignore',
                'add_to_lfs': 'Add to LFS',
                'discard_changes_context': 'Discard Changes',
                'stage_file_context': 'Stage',
                'unstage_file_context': 'Unstage',
                'select_all': 'Select All',
                'deselect_all': 'Deselect All',
                'success_gitignore_added': 'File {file} added to .gitignore',
                'success_lfs_added': 'File {file} added to LFS',
                'confirm_discard': 'Confirm Discard',
                'confirm_discard_text': 'Are you sure you want to discard changes in {file}?\nThis action cannot be undone.',
                'success_discard': 'Changes discarded in {file}',
                
                'commit_placeholder': 'Describe your changes...',
                'commit_and_save': 'Commit and Save',
                'commit_and_save_tooltip': 'Save all staged changes with this message',
                
                'lfs_status': 'Status: Not initialized',
                'lfs_installed': 'Status: LFS installed',
                'lfs_not_installed': 'Status: LFS not installed',
                'install': 'Install',
                'install_tooltip': 'Install Git LFS in this repository',
                'config_lfs': 'Config LFS',
                'config_lfs_tooltip': 'Configure LFS for large files',
                'config_unreal': 'Config Unreal',
                'config_unreal_tooltip': 'Configure LFS for Unreal Engine files',
                'download_lfs_files': 'Download LFS Files',
                'download_lfs_files_tooltip': 'Download large files tracked by LFS',
                'lfs_locks': 'Locks',
                'lfs_prune': 'Prune LFS',
                'lfs_tracking_patterns': 'Tracking {count} patterns',
                'lfs_no_files_tracked': 'No files tracked',
                'lfs_prune_success': 'LFS Prune completed successfully.',
                'lfs_prune_error': 'LFS Prune failed: {message}',
                'lfs_locks_title': 'Git LFS Locks',
                'lfs_lock_path': 'Path',
                'lfs_lock_owner': 'Owner',
                'lfs_lock_id': 'ID',
                'lfs_lock_date': 'Locked At',
                'lfs_unlock_selected': 'Unlock Selected',
                'lfs_tracking': 'LFS Tracking',
                'lfs_tracking_title': 'LFS Tracking Configuration',
                'lfs_tracking_info': 'Add file patterns to be handled by Git LFS (e.g. *.psd, *.uasset)',
                'add_plugin_defaults': 'Add Plugin Defaults',
                'add_unreal_defaults': 'Add Unreal Defaults',
                'success_unreal_defaults': 'Unreal Engine patterns added successfully',
                'lfs_size': 'Disk Usage (LFS)',
                
                'no_repo_loaded': 'No repository loaded',
                'no_changes': 'No changes - Everything is up to date',
                'select_file_diff': 'Select a file to view its changes...',
                
                'unreal_project': 'Unreal Project',
                'project_type': 'Type',
                'unreal_engine_project': 'Unreal Engine Project',
                'path': 'Path',
                'current_branch_info': 'Current branch',
                'remote': 'Remote',
                'last_commit': 'Last commit',
                
                'success_all_files_added': 'All files have been added',
                'error_commit_message': 'You must write a commit message',
                'success_commit': 'Commit completed successfully',
                'success_pull': 'Pull completed',
                'success_push': 'Push completed',
                'success_fetch': 'Fetch completed',
                'success_lfs_installed': 'Git LFS installed successfully',
                'success_lfs_pull': 'LFS Pull completed',
                'success_clone': 'Repository cloned at',
                'error_clone': 'Error cloning',
                
                'cloning_repository': 'Cloning repository...',
                'cloning': 'Cloning',
                
                'change_branch_menu': 'Change Branch',
                'remote_branches': 'Remote Branches',
                'new_branch_menu': 'New Branch...',
                'manage_branches': 'Manage Branches...',
                
                'change_branch_dialog': 'Change Branch',
                'change_branch_question': 'Change to branch \'{branch}\'?',
                'error_change_branch': 'Could not change branch',
                
                'new_branch_dialog': 'New Branch',
                'new_branch_name': 'New branch name:',
                'branch_created': 'Branch Created',
                'branch_created_question': 'Branch \'{branch}\' created successfully.\n\nSwitch to this branch now?',
                'error_create_branch': 'Could not create branch',
                
                'create_branch_from_commit': 'Create Branch',
                'create_branch_from_commit_text': 'New branch name from commit {hash}:',
                'branch_created_from_commit': 'Branch \'{branch}\' created from commit {hash}',
                
                'confirm_reset': 'Confirm Reset',
                'reset_soft': 'Soft (keep changes)',
                'reset_mixed': 'Mixed (discard staging)',
                'reset_hard': 'Hard (discard everything)',
                'reset_warning': '\n\n⚠ WARNING: You will lose all unsaved changes!',
                'reset_question': 'Reset {mode} to commit {hash}?{warning}',
                'success_reset': 'Reset {mode} completed',
                'error_reset': 'Reset error',
                
                'confirm_checkout': 'Confirm Checkout',
                'checkout_question': 'View commit {hash}?\n\nYou will be in \'detached HEAD\' mode.\nTo save changes, create a new branch.',
                'checkout_success': 'You are now viewing commit {hash}\n\nUse the branch menu to return to a normal branch.',
                
                'hash_copied': 'Hash copied: {hash}',
                
                'plugin_disabled': 'Plugin disabled',
                'unreal_plugin_disabled': 'The Unreal Engine plugin is disabled.\n\nEnable it from Settings > Plugins to use this feature.',
                'not_unreal_project': 'Not an Unreal project',
                'not_unreal_project_text': 'This repository does not appear to be an Unreal Engine project.',
                
                'optional': 'optional',
                'no_email': 'No email',
                'no_message': 'No message',
                'unknown': 'Unknown',
                
                'general': 'General',
                'general_config': 'General Configuration',
                'general_settings': 'General Settings',
                'language': 'Language',
                'language_settings': 'Language / Idioma',
                'language_change_note': 'Language changes will take effect on the next application start.',
                'language_changed_restart': 'Language changed. Restart the application to see the changes.',
                'configuration': 'Configuration',
                'configuration_accounts': 'Configuration and accounts',
                
                'clone': 'Clone',
                'clone_repository': 'Clone Repository',
                'clone_git_repository': 'Clone Git Repository',
                'clone_description': 'Download a copy of a remote repository to your computer',
                'repository_url': 'Repository URL',
                'destination_folder': 'Destination Folder',
                'browse': 'Browse',
                'cancel': 'Cancel',
                'clone_helper': 'The repository will be cloned into a new folder within the selected location',
                'select_folder': 'Select Folder',
                
                'accounts': 'Accounts',
                'plugins': 'Plugins',
                'appearance': 'Appearance',
                'my_accounts': 'My Accounts',
                'git_local': 'Git Local',
                'connected_accounts': 'Your connected accounts:',
                'refresh': 'Refresh',
                'remove': 'Remove',
                'delete': 'Delete',
                
                'login_with_github': 'Login with GitHub',
                'login_with_gitlab': 'Login with GitLab',
                'alternative_methods': 'Alternative methods:',
                'add_token_manually': 'Add a Personal Access Token manually:',
                'add_token': 'Add Token',
                'gitlab_url': 'GitLab URL:',
                'application_id': 'Application ID:',
                'application_secret': 'Application Secret:',
                'connect_gitlab': 'Connect with GitLab',
                'add_pat_manually': 'Or add a Personal Access Token manually:',
                
                'git_global_config': 'Configure your global Git identity:',
                'name': 'Name',
                'email': 'Email',
                'full_name_placeholder': 'Your full name',
                'email_placeholder': 'your@email.com',
                'save_global_config': 'Save Global Configuration',
                
                'starting_auth': 'Starting authentication...',
                'auth_error_connection': 'Error starting authentication. Check your internet connection.',
                'auth_timeout': 'Timeout expired. Try again.',
                'error_user_info': 'Error getting user information.',
                'auth_error': 'Authentication error. Try again.',
                'starting_gitlab_auth': 'Starting GitLab authentication...',
                
                'installed_plugins': 'Installed plugins:',
                'enable': 'Enable',
                'disable': 'Disable',
                
                'appearance_customization': 'Appearance Customization',
                'select_theme': 'Select your preferred theme for the interface:',
                'selected': 'Selected',
                'select': 'Select',
                'theme_changes_instant': 'Theme changes are applied immediately without restarting',
                
                'enter_gitlab_app_id': 'Enter your GitLab Application ID',
                'enter_gitlab_app_secret': 'Enter your GitLab Application Secret',
                
                'error': 'Error',
                'timeout': 'Timeout',
                'enter_client_id_secret': 'Please enter Client ID and Client Secret',
                'enter_app_id_secret': 'Enter Application ID and Secret',
                'oauth_server_error': 'Could not start OAuth server',
                'timeout_expired': 'Timeout expired',
                'error_get_user_info': 'Could not get user information',
                'no_access_token': 'No access token received',
                'error_exchange_code': 'Error exchanging code',
                'oauth_error': 'OAuth error',
                'enter_valid_token': 'Enter a valid token',
                'invalid_token': 'Invalid token or no permissions',
                'error_verify_token': 'Error verifying token',
                'enter_name_email': 'Enter name and email',
                'error_save_config': 'Error saving configuration',
                'app_minimized_to_tray': 'The application has been minimized to the system tray. Double click to restore.',
                'quit': 'Quit',
            }
        }
        
    def set_language(self, language_code):
        if language_code in self.translations:
            self.current_language = language_code
            return True
        return False
    
    def get(self, key, **kwargs):
        translation = self.translations.get(self.current_language, {}).get(key, key)
        if kwargs:
            try:
                return translation.format(**kwargs)
            except KeyError:
                return translation
        return translation
    
    def get_current_language(self):
        return self.current_language
    
    def get_available_languages(self):
        return list(self.translations.keys())

_translation_manager = None

def get_translation_manager():
    global _translation_manager
    if _translation_manager is None:
        _translation_manager = TranslationManager()
    return _translation_manager

def set_language(language_code):
    tm = get_translation_manager()
    return tm.set_language(language_code)

def tr(key, **kwargs):
    tm = get_translation_manager()
    return tm.get(key, **kwargs)
